{{ action }} Time segment
<div [formGroup]="timeSegmentForm" class="mb-3">



  <div class="time-segment-form-control">
    <div class="time-segment-form-control-label">
      Start Time
    </div>
    <div style="flex-grow:2; padding-right:10px;">
      <div *ngIf="updateTimeSegment">
        {{ udateTimeSegmentStartTime }}
      </div>
      <div *ngIf="!updateTimeSegment">
        <div *ngIf="!ifSpecifyStartTime">
          {{ calculatedStartTime.format('hh:mm a') }}
        </div>
        <div *ngIf="ifSpecifyStartTime">
          <input class="form-control" formControlName="startTime" type="time" [value]="calculatedStartTime.format('HH:mm')"/>
          <input class="form-control" formControlName="startTimeDate" type="date" [value]="now().format('YYYY-MM-DD')"/>
        </div>
      </div>
      

    </div>
    <div>
      <button class="btn btn-sm" style="background-color:rgb(255, 212, 121)" (click)="onClickSpecifyStartTime()">
        <div *ngIf="!ifSpecifyStartTime">
          Specify
        </div>
        <div *ngIf="ifSpecifyStartTime">
          <fa-icon [icon]="faTimes"></fa-icon>
        </div>
      </button>
    </div>


  </div>

  <div class="time-segment-form-control">
    <div class="time-segment-form-control-label">
      End Time
    </div>

    <div style="flex-grow:2; padding-right:10px;">
      <div *ngIf="updateTimeSegment">
        {{ udateTimeSegmentEndTime }}
      </div>
      <div *ngIf="!updateTimeSegment">
        <div *ngIf="!ifSpecifyEndTime">
          {{ now().format('hh:mm a') }}
        </div>
        <div *ngIf="ifSpecifyEndTime">
          <input class="form-control" formControlName="endTime" type="time" [value]="now().format('HH:mm')"/>
          <input class="form-control" formControlName="endTimeDate" type="date" [value]="now().format('YYYY-MM-DD')"/>
        </div>
      </div>
      

    </div>
    <div>
      <button class="btn btn-sm" style="background-color:rgb(255, 212, 121)" (click)="onClickSpecifyEndTime()">
        <div *ngIf="!ifSpecifyEndTime">
          Specify
        </div>
        <div *ngIf="ifSpecifyEndTime">
          <fa-icon [icon]="faTimes"></fa-icon>
        </div>
      </button>
    </div>




  </div>

  <div class="time-segment-form-control">
    <div>Total Duration</div>
    <div>
      {{ durationString }}
    </div>
  </div>

  <div class="form-group row my-2">
    <div class="col-12">
      <div class="input-group">
        <input type="text" class="form-control" formControlName="description" placeholder="description">
      </div>
    </div>
  </div>

  <hr>
  <!-- Activities section. -->

  <h6>Activities Prior</h6>
  <div *ngIf="timeSegmentActivities">
    <div *ngFor="let timeSegmentActivity of timeSegmentActivities" class='m-1 p-3 border border-warning time-segment-activity'
      style='border-radius:5px;'>

      <div>
        Activity: {{ timeSegmentActivity.activity.name }}
      </div>
      <div style="display:flex;flex-direction: row;" >
        
        <!-- <div *ngIf="!ifAddActivityForm" class="time-segment-activity-control" (click)="onClickUpdateTimeSegmentActivity(timeSegmentActivity)">
          <fa-icon [icon]="faCog"></fa-icon>
        </div> -->
        <div class="time-segment-activity-control" (click)="onClickDeleteTimeSegmentActivity(timeSegmentActivity)">
          <fa-icon [icon]="faTimes"></fa-icon>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="ifAddActivityForm" class='border border-warning activity-form-content-container'>
    <app-activity-form (closeActivityForm)="onCloseActivityForm($event)" (activitySaved)="onActivitySaved($event)">
    </app-activity-form>
  </div>
  <!-- End of Activities section -->

</div>

<button *ngIf="ifAddActivityButton" class="btn btn-sm btn-primary" style='border-radius:15px;' (click)="onClickAddActivity()">
  + Add Activity
</button>

<div class='d-flex flex-row-reverse'>
  <button class="btn border-warning mx-1" (click)="onClickCancelTimeSegment()">Cancel</button>
  <button class="btn btn-success mx-1" (click)="onClickSaveTimeSegment()" [disabled]="saveTimeSegmentDisabled">Save Time segment</button>

</div>